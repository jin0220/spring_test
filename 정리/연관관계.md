# 연관관계

## 연관관계의 종류
- One-To-One(일대일)
- One-To-Many(일대다)
- Many-To-One(다대일)
- Many-To-Many(다대다)

=> 객체 관점에서는 방향이라는 개념이 도입이 됨. 
A객체의 필드에 B객체가 있으면 A는 B를 알 수 있음 A -> B의 연관관계가 맺어짐. B객체에 A객체를 참조하고 있지 않다면 B -> A로 참조는 불가능

## 연관관계 주의 사항
- 테이블은 외래키 하나로 테이블 간 연관관계를 설정
- 객체는 참조를 통해 연관관계를 설정
- 객체의 연관관계는 방향성을 가짐


## 연관관계 어노테이션
### 일대다 연관관계
@ManyToOne
- 나의 엔티티를 기준으로 반대편 엔티티와의 연관성

@OneToMany
- 나의 엔티티를 기준으로 반대편 엔티티와의 연관성

mappedBy 속성
- 양방향 연관관계를 설정하는 경우, 연관관계의 ownership을 결정해야함
- ownership이란 외래키를 관리하는 주체가 누가 될 것인지를 정하는 것
- RDB에서 외래키는 "다"쪽에 있으므로 ownership은 Item이 가짐

@JoinColumn
- 컬럼은 컬럼인데 FK로 사용되는 컬럼임을 명시

FetchType: 특정 엔티티를 조회할 때 연관된 엔티티도 함께 조회할지를 결정
- FetchType.LAZY: 연관된 엔티티는 가져오지 않음
- FetchType.EAGER: 내가 명시하지 않아도 연관된 엔티티도 함께 조회

주의
- 일대다 단방향 연관관계를 사용하지 마라
- to-many 연관관게에서 "다"쪽이 너무 많으면 연관관계 매핑을 지양해라
- 양방향 연관관계에서는 helper methods를 사용하라
- EAGER보다는 LAZY로 연관관계를 

- 단방향 @OneToMany보다는 양방향 @OneToMany 연관관계가 더 바람직
- 반대편에서 @ManyToOne을 사용함으로써 "다"쪽이 외래키를 관리하는 자연스러운 구조가 됨
- 객체관점에서 컬렉션 타입을 관리하는 @OneToMany를 사용하는 것이 편리해 보일지라도 @ManyToOne로 일대 다를 관리하는 것이 좋음

### 일대일 연관관계
- Parent-Child관계로 표현
- Parent는 비즈니스적으로 중요하며 자주 참조되는 테이블
- Child는 Parent와 일대일 연관관계를 맺고 있는 테이블
- 일대일 관계에서 FK의 위치
  - 일대다, 다대일과 다르게 FK 위치를 Parent와 Child 중 하나에 지정할 수 있음
